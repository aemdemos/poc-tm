{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Megamenu Mapping (Deep Behavior Analysis)",
  "description": "Per-item deep analysis of every megamenu dropdown. Each nav trigger and every item WITHIN each dropdown must be individually hovered and clicked to record behavior. This includes nested interactions (e.g. hovering a car thumbnail shows zoomed image on the left). Continue drilling until no further interaction is found.",
  "type": "object",
  "required": ["navTriggers", "totalItemsAnalyzed", "confidence", "notes"],
  "properties": {
    "navTriggers": {
      "type": "array",
      "description": "One entry per nav item that opens a dropdown/megamenu panel.",
      "items": {
        "type": "object",
        "required": ["label", "index", "hoverBehavior", "clickBehavior", "panelType", "panelItems"],
        "properties": {
          "label": { "type": "string", "description": "Text of the nav trigger (e.g. 'Products', 'Services')" },
          "index": { "type": "integer", "minimum": 0 },
          "hoverBehavior": {
            "type": "object",
            "required": ["opensPanel", "description"],
            "properties": {
              "opensPanel": { "type": "boolean" },
              "description": { "type": "string", "description": "What happens on hover (e.g. 'opens full-width megamenu with vehicle grid')" },
              "animationType": { "type": "string" },
              "delay": { "type": "string", "description": "e.g. 'instant', '200ms'" }
            }
          },
          "clickBehavior": {
            "type": "object",
            "required": ["navigates", "description"],
            "properties": {
              "navigates": { "type": "boolean" },
              "url": { "type": "string" },
              "description": { "type": "string" },
              "opensPanel": { "type": "boolean" }
            }
          },
          "panelType": { "type": "string", "enum": ["megamenu", "dropdown", "flyout", "none"], "description": "Type of panel that opens" },
          "panelLayout": { "type": "string", "description": "e.g. 'two-column: featured-image-left + grid-right', 'single-column-list'" },
          "panelItems": {
            "type": "array",
            "description": "Every item inside the opened panel. Each must be individually tested for hover and click.",
            "items": {
              "type": "object",
              "required": ["label", "type", "hoverBehavior", "clickBehavior"],
              "properties": {
                "label": { "type": "string", "description": "Text or alt text of the item" },
                "type": { "type": "string", "enum": ["link", "image-card", "image-link", "tab", "category", "promotional", "icon", "button", "other"] },
                "hasImage": { "type": "boolean" },
                "imageUrl": { "type": "string", "description": "Source URL of the image if hasImage=true" },
                "hoverBehavior": {
                  "type": "object",
                  "required": ["hasEffect", "description"],
                  "properties": {
                    "hasEffect": { "type": "boolean" },
                    "description": { "type": "string", "description": "e.g. 'hovering shows zoomed image in left featured area', 'highlight border', 'tooltip'" },
                    "affectsOtherElements": { "type": "boolean", "description": "True if hovering this item changes OTHER elements (e.g. featured image area)" },
                    "affectedElementDescription": { "type": "string", "description": "What other element changes (e.g. 'left-side featured car image updates to this vehicle')" }
                  }
                },
                "clickBehavior": {
                  "type": "object",
                  "required": ["navigates", "description"],
                  "properties": {
                    "navigates": { "type": "boolean" },
                    "url": { "type": "string" },
                    "description": { "type": "string" }
                  }
                },
                "subItems": {
                  "type": "array",
                  "description": "Nested items (e.g. tabs within the panel, category filters). Drill until no more interaction.",
                  "items": { "$ref": "#/properties/navTriggers/items/properties/panelItems/items" }
                }
              }
            }
          },
          "categoryTabs": {
            "type": "array",
            "description": "If the panel has category tabs (e.g. TODOS, SUV, HATCHBACK), list each with its behavior.",
            "items": {
              "type": "object",
              "required": ["label", "hoverBehavior", "clickBehavior"],
              "properties": {
                "label": { "type": "string" },
                "hoverBehavior": {
                  "type": "object",
                  "properties": {
                    "hasEffect": { "type": "boolean" },
                    "description": { "type": "string" }
                  }
                },
                "clickBehavior": {
                  "type": "object",
                  "required": ["filtersContent", "description"],
                  "properties": {
                    "filtersContent": { "type": "boolean" },
                    "description": { "type": "string", "description": "e.g. 'filters vehicle grid to show only SUVs'" }
                  }
                }
              }
            }
          },
          "featuredArea": {
            "type": "object",
            "description": "If the panel has a featured/hero area (e.g. large car image on the left that changes on hover).",
            "properties": {
              "exists": { "type": "boolean" },
              "type": { "type": "string", "description": "e.g. 'large-vehicle-image', 'promotional-banner', 'specs-carousel'" },
              "updatesOnHover": { "type": "boolean", "description": "True if the featured area content changes when hovering items in the grid" },
              "description": { "type": "string" }
            }
          },
          "specDetails": {
            "type": "object",
            "description": "If specs/details are shown (e.g. Motor, Transmissão, Potência for vehicles).",
            "properties": {
              "exists": { "type": "boolean" },
              "fields": { "type": "array", "items": { "type": "string" }, "description": "e.g. ['Motor', 'Transmissão', 'Potência máxima', 'Torque máximo']" },
              "updatesOnHover": { "type": "boolean" }
            }
          }
        }
      }
    },
    "totalItemsAnalyzed": { "type": "integer", "minimum": 0, "description": "Total number of individual items that were hovered and clicked" },
    "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
    "notes": { "type": "array", "items": { "type": "string" } }
  }
}
